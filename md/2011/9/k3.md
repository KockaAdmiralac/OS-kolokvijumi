2011/septembar/SI, IR Kolokvijum 3 - Septembar 2011.doc
--------------------------------------------------------------------------------


1/  4 
 
Elektrotehnički fakultet u Beogradu 
Katedra za računarsku tehniku i informatiku 
 
Predmet: Operativni sistemi 1 (IR2OS1, SI2OS1) 
Nastavnik: prof . dr Dragan Milićev 
Odsek: Računarska tehnika i informatika, Softversko inženjerstvo 
Kolokvijum: Treći - Nadoknada, Septembar 2011. 
Datum: 2.9.2011. 
Treći kolokvijum iz Operativnih sistema 1 - Nadoknada 
Kandidat:
 _____________________________________________________________ 
Broj indeksa: ________________  E-mail:______________________________________ 
 
Kolokvijum traje 1,5 sat. Dozvoljeno je korišćenje literature. 
Zadatak 1 _______________/10   Zadatak 3 _______________/10 
Zadatak 2 _______________/10    
 
Ukupno: __________/30 = __________% = _________/10 
Napomena: Ukoliko u zadatku nešto nije dovoljno precizno definisano, student treba da 
uvede razumnu pretpostavku, da je uokviri (da bi se lakše prepoznala prilikom ocenjivanja) i 
da  nastavi  da  izgrađuje  preostali  deo  svog  odgovora  na  temeljima  uvedene  pretpostavke. 
Ocenjivanje unutar potpitanja je po sistemu "sve ili ništa", odnosno nema parcijalnih poena. 
Kod pitanja koja imaju ponuđene odgovore treba samo zaokružiti jedan odgovor. Na ostala 
pitanja odgovarati čitko, kratko i precizno. 
 

2/  4 
1. (10 poena) 
Dat je interfejs klase koja apstrahuje jedan sekvencijalni, blokovski, ulazni uređaj sa blokom 
veličine 
BlockSize znakova: 
class BlockDevice { 
public: 
  void open ();  // Open the device channel 
  void close (); // Close the device channel 
  void loadBlock (char* buffer); // Read next block to the given buffer 
}; 
Implementirati  klasu CharDevice sa  dole  datim  interfejsom  koja adaptira  interfejs  datog 
blokovskog  ulaznog  uređaja  u  interfejs sekvencijalnog,  ali znakovnog ulaznog  uređaja. 
Konstruktor i destruktor ove klase treba da otvaraju, odnosno zatvaraju dati blokovski uređaj. 
class CharDevice { 
public: 
  CharDevice (BlockDevice* bd); 
 ~CharDevice (); 
  char getChar (); 
}; 
Korišćenjem  klase CharDevice ilustrovati  primerom  učitavanje  niza  znakova  sa  ulaznog 
uređaja sve dok se ne učita znak ‘\0’. 
Rešenje:

3/  4 
2. (10 poena) 
Dat je deo API za neki fajl sistem: 
typedef int FHANDLE; // File handle 
FHANDLE fopen (char* fname, int accessFlags);  
int fclose (FHANDLE); 
int fread (FHANDLE, unsigned int offset, unsigned int size, void* buffer);  
int fwrite (FHANDLE, unsigned int offset, unsigned int size, void* buffer);  
unsigned int fsize (FHANDLE); // Returns the file size 
Sve funkcije osim fsize vraćaju pozitivnu vrednost u slučaju uspeha, a negativnu vrednost sa 
kodom  greške  u  slučaju  neuspeha. Koncept  kurzora  nije  ugrađen  u  ovaj  fajl  sistem ,  već 
funkcije za čitanje i upis u fajl zadaju pomeraj (offset) od koga se čita/upisuje. 
Korišćenjem  ovog  API  realizovati  klasu  koja  apstrahuje  fajl  sa ugrađenim  kurzorom  i 
sledećim interfejsom: 
class File { 
public: 
  File (char* fname, int accessFlags); 
 ~File (); 
  int read (void* buffer, unsigned int size); 
  int write (void* buffer, unsigned int size); 
  int seek (unsigned int offset); // Move the cursor to the given offset 
}; 
Rešenje:

4/  4 
3. (10 poena) 
Neki fajl sistem koristi indeksirani pristup alokaciji fajlova sa indeksima u dva nivoa. Polje 
index u strukturi FCB sadrži broj indeksnog bloka prvog nivoa. Broj bloka 0 u indeksu 
označava null - nealociran ulaz (fizički blok broj 0 se nikada ne koristi za fajlove). Konstanta 
INDEXSIZE definiše broj ulaza u jednom indeksu (u jednom bloku), a tip BLKNO predstavlja 
broj bloka (logičkog ili fizičkog). 
Realizovati funkciju koja se koristi kod direktnog pristupa fajlu: 
void* f_getblk(FCB* file, BLKNO logical); 
koja    vraća  pokazivač  na  dohvaćeni  i  keširani  blok sa  podacima  fajla  sa  datim  logičkim 
brojem. Na raspolaganju je funkcija: 
void* f_getblk(BLKNO physical); 
koja vraća pokazivač na keširani blok sa datim fizičkim brojem i učitava ga u keš ako je 
potrebno. 
Rešenje: 
 