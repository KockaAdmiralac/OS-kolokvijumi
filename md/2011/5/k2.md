2011/maj/SI, IR Kolokvijum 2 - Maj 2011.doc
--------------------------------------------------------------------------------


1/  5

Elektrotehnički fakultet u Beogradu
Katedra za računarsku tehniku i informatiku

Predmet: Operativni sistemi 1 (SI2OS1, IR 2OS1)
Nastavnik: prof . dr Dragan Milićev
Odsek: Softversko inženjerstvo, Računarska tehnika i informatika
Kolokvijum: Drugi, Maj 2011.
Datum: 7.5.2011.
Prvi kolokvijum iz Operativnih sistema 1
Kandidat:
 _____________________________________________________________
Broj indeksa: ________________  E-mail:______________________________________

Kolokvijum traje 1,5 sat. Dozvoljeno je korišćenje literature.
Zadatak 1 _______________/10   Zadatak 3 _______________/10
Zadatak 2 _______________/10   Zadatak 4 _______________/10

Ukupno: __________/40 = __________% = _________/15
Napomena: Ukoliko u zadatku nešto nije dovoljno precizno definisano, student treba da
uvede razumnu pretpostavku, da je uokviri (da bi se lakše prepoznala prilikom ocenjivanja) i
da  nastavi  da  izgrađuje  preostali  deo  svog  odgovora  na  temeljima  uvedene  pretpostavke.
Ocenjivanje unutar potpitanja je po sistemu "sve ili ništa", odnosno nema parcijalnih poena.
Kod pitanja koja imaju ponuđene odgovore treba samo zaokružiti jedan odgovor. Na ostala
pitanja odgovarati čitko, kratko i precizno.


2/  5
1. (10 poena)
Dva uporedna kooperativna procesa A i B razmenjuju podatke tako što proces A izračunava
vrednost deljene promenljive
a pozivom svoje privatne procedure compute_a. Tu vrednost
promenljive a koristi  proces  B tako  što na  osnovu nje izračunava  vrednost  deljene
promenljive b pozivom  svoje  privatne  procedure compute_b.  Tu  vrednost  promenljive b
potom  koristi  proces  A  za  izračunavanje  nove  vrednosti  promenljive a i  tako  ciklično.
Korišćenjem standardnih brojačkih semafora napisati kod procesa A i B sa svim neophodnim
deklaracijama. Inicijalno, proces A može odmah da izračuna početnu vrednost za
a na osnovu
statički inicijalizovane vrednosti za b, dok proces B ne može da izračuna prvu  vrednost b dok
ne dobije prvu izračunatu vrednost a.
Rešenje:

3/  5
2. (10 poena)
U klasi
Semaphore postoji privatni podatak član isLocked tipa int koji   služ i da obezbedi
međusobno isključenje pristupa strukturi semafora u višeprocesorskom operativnom sistemu.
Ako je njegova vrednost 1, kod koji se izvršava na nekom procesoru je zaključao semafor za
svoj   isključivi pristup; ako je vrednost 0, pristup semaforu je slobodan. Korišćenjem operacije
test_and_set() koja    je  implementirana  korišćenjem  odgovarajuće  atomične  instrukcije
procesora,  realozovati  operaciju Semaphore::lock() koja  treba  da obezbedi  međusobno
isključenje pristupa strukturi semafora u višeprocesorskom operativnom sistemu, ali tako da
bude efikasnija od dole date implementacije tako   što ne poziva operaciju
test_and_set ako
je semafor već zaključan od strane drugog procesora, pošto ta operacija ima veće režijske
troškove na magistrali računara.
void Semaphore::lock () {
  while (test_and_set(this->isLocked));
}
Rešenje:

4/  5
3. (10 poena)
U potpunosti realizovati klasu koja apstrahuje dinamički niz elemenata tipa
double velike
dimenzije zadate prilikom inicijalizacije parametrom size. U svakom trenutku se u memoriji
drži  samo  jedan keširani  blok  ovog  niza  veličine  zadate  parametrom blockSize.
Implementacija treba da koristi dinamičko učitavanje bloka u kome se nalazi element kome se
pristupa uz zamenu (swapping), zapravo neku vrstu preklopa (overlay), tako da se u memoriji
uvek nalazi samo jedan    keširani blok kome se trenutno pristupa, dok se ceo   niz nalazi u fajlu.
Interfejs ove klase treba da bude:
class DLArray {
public:
  DLArray (int size, int blockSize, FHANDLE fromFile);
  double get (int i);  // Get element [i]
  void   set (int i, double x); // Set element [i]
};
Inicijalno  se  vrednosti  celog niza   nalaze  u  binarnom  fajlu  zadatom trećim argumentom
(otvaranje i zatvaranje tog fajla je u odgovornosti korisnika ove klase). Na raspolaganju su
sledeće funkcije za pristup fajlu i učitavanje, odnosno snimanje datog niza elemenata tipa
double na zadatu poziciju u fajlu. Pozicija se izražava u jedinicama veličine binarnog zapisa
tipa
double, počev od 0, što znači da se fajl kroz ove funkcije može posmatrati kao veliki niz
elemenata tipa
double:
void fread (FHANDLE, int position, double[], int bufferSize);
void fwrite(FHANDLE, int position, double[], int bufferSize);
Rešenje:

5/  5
4. (10 poena)
U nekom sistemu sa straničnom organizacijom virtuelne memorije koristi se copy-on-write
tehnika deljenja stranica između procesa. U deskriptoru stranice u tabeli preslikavanja stranica
(PMT) procesa nalaze se samo sledeće informacije: broj okvira u koji se stranica preslikava (0
označava da stranica nije u memoriji, okvir broj  0 se ne dodeljuje procesima) i biti prava
pristupa  (R-dozvoljeno  čitanje  u  fazi  izvršavanja  instrukcije/dohvatanja  operanda, W-
dozvoljen upis, E-dozvoljeno čitanje u fazi dohvatanja instrukcije). Pored PMT, operativni
sistem za svaki proces vodi posebnu strukturu podataka koju naziva VMStruct  i u kojoj se
čuvaju podaci koje koristi operativni sistem, a koji nisu potrebni hardveru za preslikavanje
adresa.  Svaki  deskriptor  u  ovoj  strukturi  opisuje  čitav  skup  susednih  stranica  koje
predstavljaju logičku celinu, jer su svi ovi podaci za njih isti, i koji se u ovom kontekstu
naziva region. U ovom deskriptoru čuvaju se sledeći podaci: prva stranica u skupu stranica na
koje se deskriptor odnosi (Start  Page#), broj susednih stranica na koje se deskriptor odnosi
(Region   Length),  biti  prava  pristupa  na  logičkom  nivou (R-dozvoljeno  čitanje  u  fazi
izvršavanja instrukcije/dohvatanja operanda, W-dozvoljen upis, E-dozvoljeno čitanje u fazi
dohvatanja instrukcije), da li su stranice u ovom regionu deljene tako da ih treba kopirati pri
prvom upisu (Copy-On-Write: 0-nisu deljene, 1-jesu deljene i treba ih kopirati pri upisu, samo
ako je upis dozvoljen na logičkom nivou), kao i mesto na disku gde se zamenjuju stranice iz
tog  regiona  (nije  relevantno  za  ovaj  zadatak).  Posmatra  se  proces Parent čiji  su  delovi
struktura PMT i VMStruct dati u nastavku.
PMT       VMStruct
Page# Frame# RWE
A04h 23h ?
BF0h 14h ?
C0Ah 7Ah ?

Ovaj    proces izvršava sistemski poziv fork() i uspešno kreira proces potomak Child. Prikazati
iste delove struktura PMT i VMStruct za oba procesa Parent i Child neposredno nakon ovog
poziva. Sistem primenjuje demand  paging str ategiju (dohvata stranicu tek kada se prvi put
zatraži, ne alocira je odmah pri kreiranju procesa).
Rešenje:
StartPage# Region Length RWE-Copy-On-Write Opis
A00h 50h 001-0 Code Region
B00h FFh 110-0 Data Region
C00h 70h 100-0 Input Buffer
Region
